 Ø¥ØµÙ„Ø§Ø­ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
Ø§Ø³ØªØ¨Ø¯Ù„ Ø¯Ø§Ù„Ø© handle_external_data_queries ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ø­Ø³Ù†:

python
def handle_external_data_queries(self, user_input):
    """Ù…Ø¹Ø§Ù„Ø¬ Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© Ù…Ø¹ Ø¯Ø¹Ù… ÙƒØ§Ù…Ù„ Ù„Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"""
    try:
        user_input_lower = user_input.lower().strip()
        
        # Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ­ÙŠØ§Øª Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹
        english_greetings = ["hi", "hello", "hey", "good morning", "good evening", "good afternoon"]
        if any(greeting in user_input_lower for greeting in english_greetings):
            return {
                "text": """ğŸŒŸ Hello! I'm your advanced AI assistant. 

ğŸ¤– I can help you with:
âœ… Smart conversations in both Arabic and English
âœ… Real-time weather information  
âœ… Student and product databases
âœ… Company and restaurant directories
âœ… Medical information

Try asking me about:
â€¢ "Weather in Riyadh"
â€¢ "Student information" 
â€¢ "Products catalog"
â€¢ Or ask in Arabic for the best results!""",
                "type": "english_greeting"
            }

        # Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù„ØºØ©
        language_keywords = ["ØªØªÙƒÙ„Ù…", "Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠ", "Ø¹Ø±Ø¨ÙŠ", "Ù„ØºØ©", "language", "speak english", "arabic", "english"]
        if any(keyword in user_input_lower for keyword in language_keywords):
            return {
                "text": """ğŸŒ Yes, I speak both Arabic and English fluently!

ğŸ¯ Primary Language: Arabic (fully optimized)
ğŸ”¤ Secondary Language: English (full support)

ğŸ“Š I'm trained on:
âœ… Arabic texts (specialized)
âœ… English conversations  
âœ… Technical terms in both languages
âœ… Context understanding in both

ğŸ’¡ For best results, you can use either language!""",
                "type": "language_info"
            }

        # Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø·Ù‚Ø³ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
        weather_keywords_en = ["weather", "temperature", "forecast", "climate"]
        if any(word in user_input_lower for word in weather_keywords_en):
            return self.handle_english_weather_query(user_input)

        # Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
        student_keywords_en = ["student", "students", "pupil", "enrollment", "university", "college"]
        if any(word in user_input_lower for word in student_keywords_en):
            return self.handle_english_student_query(user_input)

        # Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
        product_keywords_en = ["product", "products", "laptop", "phone", "electronics", "price", "shop", "buy", "item"]
        if any(word in user_input_lower for word in product_keywords_en):
            return self.handle_english_product_query(user_input)

        # Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
        company_keywords_en = ["company", "companies", "corporation", "firm", "business", "enterprise"]
        if any(word in user_input_lower for word in company_keywords_en):
            return self.handle_english_company_query(user_input)

        # Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
        restaurant_keywords_en = ["restaurant", "restaurants", "food", "cuisine", "eatery", "diner", "meal"]
        if any(word in user_input_lower for word in restaurant_keywords_en):
            return self.handle_english_restaurant_query(user_input)

        # Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø·Ø¨ÙŠØ© Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
        medical_keywords_en = ["medicine", "drug", "prescription", "symptom", "headache", "fever", "pain", "doctor"]
        if any(word in user_input_lower for word in medical_keywords_en):
            return self.handle_english_medical_query(user_input)

        # Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ÙˆÙ‚Øª Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
        time_keywords_en = ["time", "what time is it", "current time", "date", "today", "clock"]
        if any(word in user_input_lower for word in time_keywords_en):
            current_time = datetime.datetime.now()
            response_text = f"â° Current Time: {current_time.strftime('%H:%M:%S')} | Date: {current_time.strftime('%Y-%m-%d')}"
            return {
                "text": response_text,
                "type": "time_response"
            }

        # Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
        help_keywords_en = ["help", "assist", "what can you do", "capabilities", "features"]
        if any(word in user_input_lower for word in help_keywords_en):
            return {
                "text": """ğŸš€ I'm an advanced AI assistant with these capabilities:

ğŸ¤– **Core Features:**
âœ… Bilingual conversations (Arabic/English)
âœ… Real-time data processing
âœ… External API integration
âœ… SQLite database management

ğŸ“Š **Data Services:**
ğŸŒ¤ï¸ Weather information: "weather in Riyadh"
ğŸ“ Student database: "student information"  
ğŸ›ï¸ Product catalog: "electronics products"
ğŸ¢ Company directory: "Saudi companies"
ğŸ½ï¸ Restaurant guide: "restaurants in Jeddah"
ğŸ’Š Medical information: "headache medicine"

ğŸ’¡ **Try these examples:**
â€¢ "What's the weather in Jeddah?"
â€¢ "Show me students in computer engineering"
â€¢ "Find laptops in products"
â€¢ "List companies in Riyadh"

I'm here to help in both English and Arabic!""",
                "type": "help_info"
            }

        return None

    except Exception as e:
        print(f"âŒ Error in handle_external_data_queries: {e}")
        return None
ÙˆØ£ÙŠØ¶Ø§Ù‹ Ø£ØµÙ„Ø­ Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©:

python
def handle_english_weather_query(self, user_input):
    """Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"""
    try:
        cities_en = ["riyadh", "jeddah", "dammam", "abha", "tabuk", "mecca", "medina", "taif"]
        user_input_lower = user_input.lower()

        found_city_en = None
        for city in cities_en:
            if city in user_input_lower:
                found_city_en = city
                break

        if found_city_en:
            city_mapping = {
                "riyadh": "Ø§Ù„Ø±ÙŠØ§Ø¶", "jeddah": "Ø¬Ø¯Ø©", "dammam": "Ø§Ù„Ø¯Ù…Ø§Ù…",
                "abha": "Ø£Ø¨Ù‡Ø§", "tabuk": "ØªØ¨ÙˆÙƒ", "mecca": "Ù…ÙƒØ©",
                "medina": "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©", "taif": "Ø§Ù„Ø·Ø§Ø¦Ù"
            }
            arabic_city = city_mapping.get(found_city_en, found_city_en)
            weather = self.data_manager.get_weather_info(arabic_city)

            if weather:
                return {
                    "text": f"""ğŸŒ¤ï¸ Weather in {found_city_en.title()} ({arabic_city}):

ğŸŒ¡ï¸ Temperature: {weather['temp']}Â°C
ğŸ’§ Humidity: {weather['humidity']}%
â˜€ï¸ Condition: {weather.get('condition_en', weather['condition'])}
ğŸ’¨ Wind: {weather['wind']}

ğŸ“Š Source: {weather.get('source', 'Local database')}
{'âš¡ Real-time data from internet!' if weather.get('real_time') else 'ğŸ“ Sample data - Add API key for live data'}""",
                    "type": "weather_en",
                    "data": weather
                }

        return {
            "text": "ğŸŒ¤ï¸ Please specify a Saudi city: Riyadh, Jeddah, Dammam, Abha, Tabuk, Mecca, Medina, or Taif\n\nExample: 'weather in Riyadh' or 'what's the temperature in Jeddah?'",
            "type": "info"
        }
    except Exception as e:
        print(f"âŒ Error in english weather query: {e}")
        return {
            "text": "ğŸŒ¤ï¸ I can help with weather information for Saudi cities. Try: 'weather in Riyadh'",
            "type": "info"
        }

def handle_english_student_query(self, user_input):
    """Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"""
    try:
        results = self.data_manager.search_students(user_input)
        if results:
            response_text = "ğŸ‘¥ Student Search Results:\n\n"
            for student in results[:3]:
                response_text += f"""ğŸ“ {student.get('name_en', student['name'])}
ğŸ“š Major: {student.get('major_en', student['major'])}
ğŸ“Š GPA: {student['gpa']}
ğŸ“… Year: {student['year']}
ğŸ›ï¸ University: {student['university']}

"""
            response_text += "ğŸ’¾ Data Source: students_data.csv\nğŸ”— Connected to external database system"
            return {
                "text": response_text,
                "type": "students_en",
                "data": results
            }
        return {
            "text": "ğŸ” No students found matching your query.\n\nTry: 'computer engineering students' or 'students named Ahmed'",
            "type": "info"
        }
    except Exception as e:
        print(f"âŒ Error in english student query: {e}")
        return {
            "text": "ğŸ“ I can search student database. Try: 'find engineering students'",
            "type": "info"
        }

def handle_english_product_query(self, user_input):
    """Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"""
    try:
        results = self.data_manager.search_products(user_input)
        if results:
            response_text = "ğŸ›ï¸ Product Search Results:\n\n"
            for product in results[:3]:
                response_text += f"""ğŸ“¦ {product.get('name_en', product['name'])}
ğŸ’° Price: {product['price']} SAR
ğŸ“‚ Category: {product.get('category_en', product['category'])}
ğŸ·ï¸ Brand: {product.get('brand', 'N/A')}
â­ Rating: {product.get('rating', 'N/A')}/5
ğŸ“Š Stock: {product['stock']} units

"""
            response_text += "ğŸ—‚ï¸ Connected to product inventory system"
            return {
                "text": response_text,
                "type": "products_en",
                "data": results
            }
        return {
            "text": "ğŸ” No products found matching your query.\n\nTry: 'laptops', 'electronics', or 'phones'",
            "type": "info"
        }
    except Exception as e:
        print(f"âŒ Error in english product query: {e}")
        return {
            "text": "ğŸ›ï¸ I can search product catalog. Try: 'show me laptops'",
            "type": "info"
        }

def handle_english_company_query(self, user_input):
    """Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"""
    try:
        results = self.data_manager.search_companies(user_input)
        if results:
            response_text = "ğŸ¢ Company Search Results:\n\n"
            for company in results[:3]:
                response_text += f"""ğŸ¢ {company.get('name_en', company['name'])}
ğŸ­ Sector: {company.get('sector_en', company['sector'])}
ğŸ‘¥ Employees: {company['employees']:,}
ğŸ“ City: {company['city']}

"""
            response_text += "ğŸ’¼ Connected to business database"
            return {
                "text": response_text,
                "type": "companies_en",
                "data": results
            }
        return {
            "text": "ğŸ” No companies found matching your query.\n\nTry: 'Saudi Aramco', 'telecommunications companies', or 'companies in Riyadh'",
            "type": "info"
        }
    except Exception as e:
        print(f"âŒ Error in english company query: {e}")
        return {
            "text": "ğŸ¢ I can search company directory. Try: 'list technology companies'",
            "type": "info"
        }

def handle_english_restaurant_query(self, user_input):
    """Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø·Ø§Ø¹Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"""
    try:
        results = self.data_manager.search_restaurants(user_input)
        if results:
            response_text = "ğŸ½ï¸ Restaurant Search Results:\n\n"
            for restaurant in results[:3]:
                response_text += f"""ğŸ½ï¸ {restaurant.get('name_en', restaurant['name'])}
ğŸ´ Cuisine: {restaurant.get('cuisine_en', restaurant['cuisine'])}
â­ Rating: {restaurant['rating']}/5
ğŸ’° Price Range: {restaurant['price_range']}
ğŸ“ City: {restaurant['city']}

"""
            response_text += "ğŸ—ºï¸ Connected to restaurant guide database"
            return {
                "text": response_text,
                "type": "restaurants_en",
                "data": results
            }
        return {
            "text": "ğŸ” No restaurants found matching your query.\n\nTry: 'Italian restaurants', 'restaurants in Riyadh', or 'Middle Eastern cuisine'",
            "type": "info"
        }
    except Exception as e:
        print(f"âŒ Error in english restaurant query: {e}")
        return {
            "text": "ğŸ½ï¸ I can search restaurant guide. Try: 'find Italian restaurants'",
            "type": "info"
        }

def handle_english_medical_query(self, user_input):
    """Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"""
    try:
        user_input_lower = user_input.lower()
        response_text = "ğŸ©º Medical Information:\n\n"

        # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø£Ø¯ÙˆÙŠØ©
        found_medicines = []
        for medicine in self.data_manager.medical_database["medicines"]:
            if (medicine["name_en"].lower() in user_input_lower or
                medicine["name"].lower() in user_input_lower):
                found_medicines.append(medicine)
                response_text += f"ğŸ’Š About '{medicine['name_en']}' ({medicine['name']}):\n"
                response_text += f"   - Type: {medicine['type']}\n"
                response_text += f"   - Dose: {medicine['dose']}\n"
                response_text += f"   - Frequency: {medicine['frequency']}\n\n"

        # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶
        for symptom, medicines in self.data_manager.medical_database["symptoms_medicine_map"].items():
            if symptom in user_input_lower:
                response_text += f"ğŸ¤’ About '{symptom}':\n"
                response_text += f"   - Suggested medicines: {', '.join(medicines)}\n"
                response_text += "   - **Warning:** These are just suggestions, always consult a doctor!\n\n"

        if not found_medicines and "medicine" not in response_text:
            response_text = """ğŸ©º Welcome to Medical Information Section!

I can help you with medicine information and symptoms.

âœ¨ **Try questions like:**
â€¢ "What is paracetamol used for?"
â€¢ "Medicine for headache"
â€¢ "Symptoms of allergy"

**Important Note:** I'm not a substitute for professional medical advice. Always consult your doctor or pharmacist before taking any medicine.
"""

        return {
            "text": response_text,
            "type": "medical_info_en"
        }
    except Exception as e:
        print(f"âŒ Error in english medical query: {e}")
        return {
            "text": "ğŸ©º I can provide general medical information. Try: 'headache medicine' or 'what is paracetamol'",
            "type": "info"
        }